# API BLOCKERS - 19.09.2025

## üîç –°–¢–ê–¢–£–° API

### –û—Å–Ω–æ–≤–Ω–æ–π API
- **URL**: GET /api/search?q={query}&page={page}&pageSize={pageSize}
- **–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–ï –î–û–°–¢–£–ü–ï–ù
- **–ü—Ä–∏—á–∏–Ω–∞**: –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω (–ø–æ—Ä—Ç 80)

### –ü—Ä–æ–∫—Å–∏ API
- **URL**: http://localhost:8002
- **–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–ï –î–û–°–¢–£–ü–ï–ù  
- **–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω

## üõ†Ô∏è –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –†–ï–®–ï–ù–ò–Ø

### Fallback –∫ Mock –¥–∞–Ω–Ω—ã–º
- **–ü—É—Ç—å**: public/mock/search-{query}.json
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
- **–ü—Ä–∏–º–µ—Ä**: public/mock/search-—Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä.json

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–õ–æ–≥–∏–∫–∞**: try/catch –≤ fetchPage()
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ**: –º—è–≥–∫–∏–π fallback –±–µ–∑ –ø–æ–ª–æ–º–∫–∏ UI
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: console.warn –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìä –ù–ê–ë–õ–Æ–î–ï–ù–ò–Ø

### HTTP –∫–æ–¥—ã
- **404** - API —ç–Ω–¥–ø–æ–∏–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω (—Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω)
- **CORS** - –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è (API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- **–¢–∞–π–º–∞—É—Ç—ã** - –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∏—Å—å (API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
```
API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º mock –¥–∞–Ω–Ω—ã–µ: TypeError: Failed to fetch
Mock –¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä** - node server.js (–ø–æ—Ä—Ç 80)
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–∫—Å–∏** - node proxy.js (–ø–æ—Ä—Ç 8002)
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å API** - curl http://localhost/api/search?q=test

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ
1. **–î–æ–±–∞–≤–∏—Ç—å health check** - /api/health —ç–Ω–¥–ø–æ–∏–Ω—Ç
2. **–£–ª—É—á—à–∏—Ç—å error handling** - –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏
3. **–î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É** - –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## üìù –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π fallback
```javascript
async function fetchPage() {
  try {
    const res = await fetch(url, { credentials: 'include' });
    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    return res.json();
  } catch (error) {
    console.warn('API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º mock –¥–∞–Ω–Ω—ã–µ:', error.message);
    return await fetchMockData();
  }
}
```

### Mock —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```json
{
  "items": [...],
  "total": number,
  "page": number,
  "pageSize": number
}
```

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

- **UI –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- **Mock –¥–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç** –∫–∞–∫ fallback
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç** –Ω–µ –Ω–∞—Ä—É—à–µ–Ω
- **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
